webpackJsonp([1],{"3hp+":function(i,t){},"7/87":function(i,t){},GaSV:function(i,t){},LxQS:function(i,t){},NHnr:function(i,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=e("7+uW"),a={render:function(){var i=this.$createElement,t=this._self._c||i;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var l=e("VU/8")({name:"App"},a,!1,function(i){e("7/87")},null,null).exports,s=e("/ocq"),r={name:"WeaponInput",props:{weapon:Object}},o={render:function(){var i=this,t=i.$createElement,e=i._self._c||t;return e("form",{staticClass:"weapon-input"},[e("div",{staticClass:"input-item"},[e("span",{staticClass:"input-label"},[i._v("Raw")]),i._v(" "),e("input",{directives:[{name:"model",rawName:"v-model.number",value:i.weapon.raw,expression:"weapon.raw",modifiers:{number:!0}}],staticClass:"input-field",attrs:{type:"number"},domProps:{value:i.weapon.raw},on:{input:function(t){t.target.composing||i.$set(i.weapon,"raw",i._n(t.target.value))},blur:function(t){i.$forceUpdate()}}})]),i._v(" "),e("div",{staticClass:"input-item"},[e("span",{staticClass:"input-label"},[i._v("Affinity")]),i._v(" "),e("div",[e("input",{directives:[{name:"model",rawName:"v-model.number",value:i.weapon.affinity,expression:"weapon.affinity",modifiers:{number:!0}}],staticClass:"affinity-input input-field",attrs:{type:"number"},domProps:{value:i.weapon.affinity},on:{input:function(t){t.target.composing||i.$set(i.weapon,"affinity",i._n(t.target.value))},blur:function(t){i.$forceUpdate()}}}),i._v("%\n    ")])]),i._v(" "),e("div",{staticClass:"input-item"},[e("span",{staticClass:"input-label"},[i._v("Sharpness")]),i._v(" "),e("select",{directives:[{name:"model",rawName:"v-model",value:i.weapon.sharpness,expression:"weapon.sharpness"}],staticClass:"input-field",on:{change:function(t){var e=Array.prototype.filter.call(t.target.options,function(i){return i.selected}).map(function(i){return"_value"in i?i._value:i.value});i.$set(i.weapon,"sharpness",t.target.multiple?e:e[0])}}},[e("option",[i._v("White")]),i._v(" "),e("option",[i._v("Blue")]),i._v(" "),e("option",[i._v("Green")]),i._v(" "),e("option",[i._v("Yellow")]),i._v(" "),e("option",[i._v("Orange")]),i._v(" "),e("option",[i._v("Red")])])])])},staticRenderFns:[]};var f=e("VU/8")(r,o,!1,function(i){e("3hp+")},null,null).exports,u={1:{name:"Weakness Exploit",defaultActiviation:100,levels:[{rawModifier:0,affinityModifier:.15},{rawModifier:0,affinityModifier:.3},{rawModifier:0,affinityModifier:.5}]},2:{name:"Maximum Might",defaultActiviation:100,levels:[{rawModifier:0,affinityModifier:.1},{rawModifier:0,affinityModifier:.2},{rawModifier:0,affinityModifier:.3}]},3:{name:"Attack Boost",defaultActiviation:100,fixedActivation:!0,levels:[{rawModifier:3,affinityModifier:0},{rawModifier:6,affinityModifier:0},{rawModifier:9,affinityModifier:0},{rawModifier:12,affinityModifier:.05},{rawModifier:15,affinityModifier:.05},{rawModifier:18,affinityModifier:.05},{rawModifier:21,affinityModifier:.05}]}},c={name:"Calculator",props:{weapon:Object,skills:Array,affinityMultiplier:Number,settings:{type:Object,default:{}}},computed:{sharpnessMultiplier:function(){switch(this.weapon.sharpness){case"White":return 1.32;case"Blue":return 1.2;case"Green":return 1.05;case"Yellow":return 1;case"Red":return.75;case"Orange":return.5;default:return 1}},affinity:function(){return this.weapon.affinity/100},fixedSkills:function(){return this.skills.filter(function(i){return i.activation>=100})},variableSkills:function(){return this.skills.filter(function(i){return i.activation<100&&i.activation>0})},fixedRawAndAffinity:function(){var i=this.weapon.raw,t=this.affinity;this.settings.debug&&this.settings.verbose&&console.log("[ Calculating fixed raw and affinity ]");for(var e=0;e<this.fixedSkills.length;e++){var n=this.fixedSkills[e],a=this.getRawAndAffinityForSkill(n);i+=a.raw,t+=a.affinity,t=Math.min(1,t),t=Math.max(-1,t)}return{raw:i,affinity:t}},finalAverageRaw:function(){var i=this.variableSkills.length;if(i<1)return this.averageRaw(this.fixedRawAndAffinity.raw,this.fixedRawAndAffinity.affinity);console.log("[ Calculating variable raw and affinity | Fixed Raw: "+this.fixedRawAndAffinity.raw+" | Fixed Affinity: "+this.fixedRawAndAffinity.affinity+" ]");for(var t=Math.pow(2,i),e=0,n=0;n<t;n++){var a=this.convertToDecimal(n,i),l=this.getRawAndAffinityForConfig(a);this.settings.debug&&console.log("Calculating raw for configuration "+a+". Chance: "+100*l.chance+"%"),l.chance>0&&(e+=this.averageRaw(l.raw,l.affinity)*l.chance)}return e},displayFixedAffinity:function(){return this.roundToDecimal(100*this.fixedRawAndAffinity.affinity)},roundedFinalRaw:function(){return this.roundToDecimal(this.finalAverageRaw)}},methods:{convertToDecimal:function(i,t){var e=(i>>>0).toString(2);return""+"0".repeat(t-e.length)+e},averageRaw:function(i,t){var e=this.affinityMultiplier;t<0&&(e=.25);var n=i*this.sharpnessMultiplier*(1+t*e);return this.settings.debug&&console.log("> "+i+" * "+this.sharpnessMultiplier+" * (1 + "+t+" * "+e+") = "+n),n},getRawAndAffinityForConfig:function(i){for(var t=0,e=this.fixedRawAndAffinity.raw,n=this.fixedRawAndAffinity.affinity,a=1,l=0;l<this.variableSkills.length;l++){var s=this.variableSkills[l],r=s.activation/100;if("1"===i[t]){var o=this.getRawAndAffinityForSkill(s);e+=o.raw,n+=o.affinity,n=Math.min(1,n),n=Math.max(-1,n),a*=r}else a*=1-r;t++}return{raw:e,affinity:n,chance:a}},getRawAndAffinityForSkill:function(i){var t=u[i.id],e=t.levels[i.level-1].rawModifier,n=t.levels[i.level-1].affinityModifier;return this.settings.debug&&this.settings.verbose&&console.log('Checking data for skill "'+t.name+'" lv '+i.level+" | Raw: "+e+" | Affinity: "+n),{raw:e,affinity:n}},roundToDecimal:function(i){var t=Math.pow(10,this.settings.precision||2);return Math.round(i*t)/t}}},d={render:function(){var i=this,t=i.$createElement,e=i._self._c||t;return e("div",{staticClass:"damage-display bordered-box"},[e("div",{staticClass:"damage-item damage-fixed"},[e("span",{staticClass:"damage-label"},[i._v("Fixed raw:")]),i._v(" "),e("span",{staticClass:"damage-number"},[i._v(i._s(this.fixedRawAndAffinity.raw))])]),i._v(" "),e("div",{staticClass:"damage-item damage-fixed"},[e("span",{staticClass:"damage-label"},[i._v("Fixed affinity:")]),i._v(" "),e("span",{staticClass:"damage-number"},[i._v(i._s(i.displayFixedAffinity)+"%")])]),i._v(" "),e("div",{staticClass:"damage-item damage-final"},[e("span",{staticClass:"damage-label"},[i._v("Average raw:")]),i._v(" "),e("span",{staticClass:"damage-number"},[i._v(i._s(this.roundedFinalRaw))])])])},staticRenderFns:[]};var v=e("VU/8")(c,d,!1,function(i){e("GaSV")},null,null).exports,p=e("W3Iv"),m=e.n(p),h=e("T1ft"),k={name:"SkillSelector",components:{VueSelect:e.n(h).a},data:function(){return{skillList:m()(u).map(function(i){return{label:i[1].name,value:parseInt(i[0])}}).sort(function(i,t){var e=i.label.toUpperCase(),n=t.label.toUpperCase();return e<n?-1:e>n?1:0})}},methods:{skillSelected:function(i){this.$emit("skill-added",i.value)}}},w={render:function(){var i=this.$createElement,t=this._self._c||i;return t("div",{staticClass:"skill-selector"},[t("div",{staticClass:"skills-input input-item"},[t("span",{staticClass:"input-label"},[this._v("\n      Select skills\n    ")]),this._v(" "),t("vue-select",{attrs:{placeholder:"Type to search...","clear-search-on-select":!0,options:this.skillList,"on-change":this.skillSelected}})],1)])},staticRenderFns:[]};var y=e("VU/8")(k,w,!1,function(i){e("tR68")},null,null).exports,_=e("Gu7T"),g=e.n(_),A={name:"SkillDisplayItem",props:{skill:Object},computed:{skillData:function(){return u[this.skill.id]},skillName:function(){return this.skillData.name},skillLevels:function(){return[].concat(g()(Array(this.skillData.levels.length).keys())).map(function(i){return i+1})},enableActivationEdit:function(){return!this.skillData.fixedActivation}},methods:{updateSkillLevel:function(i){this.$emit("skill-level-update",this.skill.id,parseInt(i.target.value))},updateSkillActivation:function(i){this.$emit("skill-level-activation",this.skill.id,parseInt(i.target.value))},removeSkill:function(){this.$emit("skill-remove",this.skill.id)}}},b={render:function(){var i=this,t=i.$createElement,e=i._self._c||t;return e("div",{staticClass:"skill-display-item bordered-box"},[e("div",{staticClass:"skill-header"},[e("div",{staticClass:"skill-name"},[i._v("\n      "+i._s(i.skillName)+"\n    ")]),i._v(" "),e("a",{staticClass:"remove-link",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),i.removeSkill(t)}}},[i._v("x")])]),i._v(" "),e("form",{staticClass:"skill-edit"},[e("div",{staticClass:"input-item"},[e("span",{staticClass:"input-label"},[i._v("Level:")]),i._v(" "),e("select",{staticClass:"input-field",attrs:{type:"number"},domProps:{value:i.skill.level},on:{change:i.updateSkillLevel}},i._l(i.skillLevels,function(t){return e("option",[i._v("\n          "+i._s(t)+"\n        ")])}))]),i._v(" "),i.enableActivationEdit?e("div",{staticClass:"input-item"},[e("span",{staticClass:"input-label"},[i._v("Activation:")]),i._v(" "),e("div",[e("input",{staticClass:"activation-input input-field",attrs:{type:"number"},domProps:{value:i.skill.activation},on:{change:i.updateSkillActivation}}),i._v("%\n      ")])]):i._e()])])},staticRenderFns:[]};var C={name:"SkillDisplay",components:{SkillDisplayItem:e("VU/8")(A,b,!1,function(i){e("mf1w")},null,null).exports},props:{skills:Array},methods:{updateSkillLevel:function(i,t){this.$emit("skill-level-update",i,t)},updateSkillActivation:function(i,t){this.$emit("skill-level-activation",i,t)},removeSkill:function(i){this.$emit("skill-remove",i)}}},S={render:function(){var i=this,t=i.$createElement,e=i._self._c||t;return e("div",{staticClass:"skills-display"},i._l(i.skills,function(t){return e("skill-display-item",{key:t.id,attrs:{skill:t},on:{"skill-level-update":i.updateSkillLevel,"skill-level-activation":i.updateSkillActivation,"skill-remove":i.removeSkill}})}))},staticRenderFns:[]};var x={name:"SkillControl",components:{SkillSelector:y,SkillDisplay:e("VU/8")(C,S,!1,function(i){e("LxQS")},null,null).exports},props:{skills:Array},methods:{findSkillIndex:function(i){return this.skills.findIndex(function(t){return t.id===i})},addSkill:function(i){if(this.findSkillIndex(i)<0){var t=this.skills;t.push({id:i,level:1,activation:u[i].defaultActiviation}),this.$emit("update:skills",t)}},updateSkillLevel:function(i,t){var e=this.findSkillIndex(i);if(e>=0&&this.skills[e].level!==t){var n=this.skills;n[e].level=t,this.$emit("update:skills",n)}},updateSkillActivation:function(i,t){var e=this.findSkillIndex(i);if(t>100&&(t=100),t<0&&(t=0),e>=0&&this.skills[e].activation!==t){var n=this.skills;n[e].activation=t,this.$emit("update:skills",n)}},removeSkill:function(i){var t=this.findSkillIndex(i);if(t>=0){var e=this.skills;e.splice(t,1),this.$emit("update:skills",e)}}}},M={render:function(){var i=this,t=i.$createElement,e=i._self._c||t;return e("div",{staticClass:"skill-controls bordered-box"},[e("skill-selector",{on:{"skill-added":i.addSkill}}),i._v(" "),e("skill-display",{attrs:{skills:i.skills},on:{"update:skills":function(t){i.skills=t},"skill-level-update":i.updateSkillLevel,"skill-level-activation":i.updateSkillActivation,"skill-remove":i.removeSkill}})],1)},staticRenderFns:[]},R={name:"Main",components:{WeaponInput:f,Calculator:v,SkillControl:e("VU/8")(x,M,!1,null,null,null).exports},watch:{"weapon.affinity":function(i){this.weapon.affinity>100&&(this.weapon.affinity=100),this.weapon.affinity<0&&(this.weapon.affinity=0)}},data:function(){return{weapon:{raw:200,affinity:0,sharpness:"Green"},skills:[],affinityMultiplier:.25,settings:{debug:!1,verbose:!1,precision:2,version:"0.0.3"}}}},$={render:function(){var i=this,t=i.$createElement,e=i._self._c||t;return e("div",{staticClass:"mh-calc"},[e("h1",[i._v("\n    MHW Damage Calculator\n    "),e("div",{staticClass:"version-number"},[i._v("\n      v"+i._s(i.settings.version)+"\n    ")])]),i._v(" "),e("div",{staticClass:"main-content"},[e("div",{staticClass:"weapon-col bordered-box"},[e("weapon-input",{attrs:{weapon:i.weapon}})],1),i._v(" "),e("calculator",{attrs:{weapon:i.weapon,skills:i.skills,affinityMultiplier:i.affinityMultiplier,settings:i.settings}})],1),i._v(" "),e("div",{staticClass:"skills-col"},[e("skill-control",{attrs:{skills:i.skills},on:{"update:skills":function(t){i.skills=t}}})],1)])},staticRenderFns:[]};var F=e("VU/8")(R,$,!1,function(i){e("T1vM")},null,null).exports;n.a.use(s.a);var D=new s.a({routes:[{path:"/",name:"Main",component:F}]});n.a.config.productionTip=!1,new n.a({el:"#app",router:D,components:{App:l},template:"<App/>"})},T1vM:function(i,t){},mf1w:function(i,t){},tR68:function(i,t){}},["NHnr"]);
//# sourceMappingURL=app.94bf435831e782f8467c.js.map